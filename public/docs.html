<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>文档 - CacheKV PHP缓存库</title>
    <meta name="description" content="CacheKV完整文档，包含API参考、配置指南、使用示例和最佳实践。">
    <meta name="keywords" content="CacheKV文档,PHP缓存API,Redis缓存配置,缓存使用指南">
    <link rel="canonical" href="https://cachekv.com/docs.html">
    <link rel="stylesheet" href="../assets/css/style.css">
</head>
<body>
    <header>
        <nav>
            <div class="logo"><a href="index.html">CacheKV</a></div>
            <ul>
                <li><a href="index.html#features">功能特性</a></li>
                <li><a href="index.html#quickstart">快速开始</a></li>
                <li><a href="docs.html">文档</a></li>
                <li><a href="https://github.com/g1012415019/CacheKV">GitHub</a></li>
            </ul>
        </nav>
    </header>

    <main class="docs-page">
        <div class="docs-container">
            <aside class="docs-sidebar">
                <h3>文档导航</h3>
                <ul>
                    <li><a href="#installation">安装</a></li>
                    <li><a href="#configuration">配置</a></li>
                    <li><a href="#basic-usage">基础使用</a></li>
                    <li><a href="#batch-operations">批量操作</a></li>
                    <li><a href="#statistics">统计功能</a></li>
                    <li><a href="#api-reference">API参考</a></li>
                </ul>
            </aside>

            <div class="docs-content">
                <h1>CacheKV 文档</h1>

                <section id="installation">
                    <h2>安装</h2>
                    <pre><code>composer require asfop/cache-kv</code></pre>
                    <p><strong>系统要求：</strong></p>
                    <ul>
                        <li>PHP >= 7.0</li>
                        <li>Redis 扩展</li>
                    </ul>
                </section>

                <section id="configuration">
                    <h2>配置</h2>
                    <pre><code><?php
use Asfop\CacheKV\Core\CacheKVFactory;

CacheKVFactory::configure(function() {
    $redis = new Redis();
    $redis->connect('127.0.0.1', 6379);
    return $redis;
});</code></pre>
                </section>

                <section id="basic-usage">
                    <h2>基础使用</h2>
                    <h3>单个数据获取</h3>
                    <pre><code>$user = kv_get('user.profile', ['id' => 123], function() {
    return getUserFromDatabase(123);
}, 3600); // TTL: 1小时</code></pre>

                    <h3>删除缓存</h3>
                    <pre><code>// 删除指定缓存
kv_delete('user.profile', ['id' => 123]);

// 按前缀删除
kv_delete_prefix('user.profile', ['id' => 123]);</code></pre>
                </section>

                <section id="batch-operations">
                    <h2>批量操作</h2>
                    <pre><code>$users = kv_get_multi('user.profile', [
    ['id' => 1], ['id' => 2], ['id' => 3]
], function($missedKeys) {
    $data = [];
    foreach ($missedKeys as $cacheKey) {
        $params = $cacheKey->getParams();
        $data[(string)$cacheKey] = getUserFromDatabase($params['id']);
    }
    return $data;
});</code></pre>
                </section>

                <section id="statistics">
                    <h2>统计功能</h2>
                    <pre><code>// 获取统计信息
$stats = kv_stats();
// ['hits' => 1500, 'misses' => 300, 'hit_rate' => '83.33%']

// 获取热点键
$hotKeys = kv_hot_keys(10);

// 清空统计
kv_clear_stats();</code></pre>
                </section>

                <section id="api-reference">
                    <h2>API参考</h2>
                    <div class="api-table">
                        <table>
                            <thead>
                                <tr>
                                    <th>函数</th>
                                    <th>描述</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>kv_get()</code></td>
                                    <td>获取缓存数据</td>
                                </tr>
                                <tr>
                                    <td><code>kv_get_multi()</code></td>
                                    <td>批量获取缓存</td>
                                </tr>
                                <tr>
                                    <td><code>kv_delete()</code></td>
                                    <td>删除指定缓存</td>
                                </tr>
                                <tr>
                                    <td><code>kv_stats()</code></td>
                                    <td>获取统计信息</td>
                                </tr>
                                <tr>
                                    <td><code>kv_hot_keys()</code></td>
                                    <td>获取热点键</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <footer>
        <p>&copy; 2024 CacheKV. MIT License.</p>
    </footer>
</body>
</html>
